<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Will you be my Valentine?</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Quicksand', sans-serif;
      overflow-y: auto;
      min-height: 100vh;
    }

    .container {
      min-height: 100vh;
      display: flex;
      padding: 20px;
      position: relative;
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ff9a9e 100%);
    }

    /* Animation Classes */
    .fade-layer {
      transition: opacity 0.6s ease-in-out;
      opacity: 1;
      width: 100%;
      display: flex;
      margin: auto;
      justify-content: center;
      min-height: min-content;
    }

    .fade-out {
      opacity: 0;
    }

    .content {
      text-align: center;
      max-width: 650px;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      padding: 50px 40px;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      z-index: 10;
    }

    .button-container {
      display: flex;
      gap: 30px;
      justify-content: center;
      margin-top: 40px;
      position: relative;
    }

    .btn {
      width: 160px;
      height: 60px;
      font-size: 1.2rem;
      font-weight: 700;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-family: 'Quicksand', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .btn-yes {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    .btn-no {
      background: white;
      color: #ff4757;
      position: relative;
      border: 2px solid #fed6e3;
    }

    .btn-no.absolute {
      position: fixed;
      z-index: 1000;
    }

    .btn-next-fixed {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 2000;
      background: #ff4757;
      color: white;
      width: 140px;
      height: 55px;
      transition: opacity 0.6s ease-in-out, transform 0.3s ease;
    }

    .btn-next-fixed:hover {
      transform: scale(1.05);
    }

    h1 {
      font-family: 'Pacifico', cursive;
      color: #ff6b9d;
      margin-bottom: 20px;
    }

    .story-text {
      line-height: 1.8;
      color: #555;
      font-size: 1.1rem;
    }

    .yippee-screen {
      position: fixed;
      inset: 0;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .flash-text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 25px;
      border-radius: 20px;
      color: #ff4757;
      font-weight: bold;
      z-index: 5000;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
  const { useState, useEffect } = React;

  // --- CONFIGURATION: SET YOUR DATES HERE ---
  // Format: "YYYY-MM-DD"
  const UNLOCK_DATES = {
    3: "2025-02-11", // Page 3 (Promise Day) unlocks Feb 11
    4: "2025-02-12", // Page 4 (Hug Day) unlocks Feb 12
    5: "2025-02-13", // Page 5 (Kiss Day) unlocks Feb 13
    6: "2025-02-14", // Page 6 (The Final Reveal) unlocks Feb 14
    7: "2025-02-14"  // Page 7 (Closing Message) unlocks Feb 14
  };
  // ------------------------------------------

  function App() {
    const [page, setPage] = useState(1);
    const [isTransitioning, setIsTransitioning] = useState(false);
    const [isNoAbsolute, setIsNoAbsolute] = useState(false);
    const [noPosition, setNoPosition] = useState({ top: 'auto', left: 'auto' });
    const [showFlash, setShowFlash] = useState(false);
    const [showYippee, setShowYippee] = useState(false);
    const [isNextUnlocked, setIsNextUnlocked] = useState(false);
    const [timeMessage, setTimeMessage] = useState("");

    // CHECK DATE LOGIC
    useEffect(() => {
      const checkDate = () => {
        const nextPage = page + 1;
        
        // If there is no specific unlock date for the next page, it's open (Page 1 -> 2)
        if (!UNLOCK_DATES[nextPage]) {
          setIsNextUnlocked(true);
          setTimeMessage("");
          return;
        }

        const now = new Date();
        const unlockDate = new Date(UNLOCK_DATES[nextPage] + "T00:00:00");

        if (now >= unlockDate) {
          setIsNextUnlocked(true);
          setTimeMessage("");
        } else {
          setIsNextUnlocked(false);
          const diff = unlockDate - now;
          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
          const minutes = Math.floor((diff / (1000 * 60)) % 60);
          
          if (days > 0) setTimeMessage(`Opens in ${days}d ${hours}h`);
          else if (hours > 0) setTimeMessage(`Opens in ${hours}h ${minutes}m`);
          else setTimeMessage(`Opens in ${minutes}m`);
        }
      };

      checkDate();
      const timer = setInterval(checkDate, 60000); 
      return () => clearInterval(timer);
    }, [page]);

    const triggerPageChange = (nextPage) => {
      if (!isNextUnlocked && UNLOCK_DATES[nextPage]) {
         alert(`No cheating! üòú This unlocks on ${UNLOCK_DATES[nextPage]}`);
         return;
      }
      setIsTransitioning(true);
      setTimeout(() => {
        setPage(nextPage);
        setIsTransitioning(false);
      }, 600); 
    };

    const moveNoButton = () => {
      if (!isNoAbsolute) setIsNoAbsolute(true);
      const maxX = window.innerWidth - 160;
      const maxY = window.innerHeight - 60;
      setNoPosition({
        left: `${Math.random() * maxX}px`,
        top: `${Math.random() * maxY}px`
      });
      setShowFlash(true);
      setTimeout(() => setShowFlash(false), 700);
    };

    const handleYes = () => {
      setShowYippee(true);
      setTimeout(() => {
        setShowYippee(false);
        triggerPageChange(2);
      }, 2500);
    };

    return (
      <div className="container">
        {showFlash && <div className="flash-text">Wrong choice! Try again üòú</div>}

        {showYippee && (
          <div className="yippee-screen">
            <h1 style={{ fontSize: '4rem' }}>Yippeeee! üéâ</h1>
            <img src="ted-blow-a-kiss.gif" alt="Yippee" style={{ maxWidth: '300px', margin: '20px', borderRadius: '15px' }} />
            <audio autoPlay>
              <source src="yippee-tbh.mp3" type="audio/mpeg" />
            </audio>
          </div>
        )}

        <div className={`fade-layer ${isTransitioning ? 'fade-out' : ''}`}>

          {/* PAGE 1: PROPOSAL (Always Open) */}
          {page === 1 && (
            <div className="content">
              <h1>Arka sent you a request</h1>
              <p style={{ fontSize: '1.4rem', color: '#ff4757' }}>Will you be my Valentine?</p>
              <div className="button-container">
                <button className="btn btn-yes" onClick={handleYes}>Yes ‚ù§Ô∏è</button>
                <button
                  className={`btn btn-no ${isNoAbsolute ? 'absolute' : ''}`}
                  onMouseEnter={isNoAbsolute ? moveNoButton : null}
                  onClick={moveNoButton}
                  style={{ top: noPosition.top, left: noPosition.left }}
                >No</button>
              </div>
            </div>
          )}

          {/* PAGE 2: STORY INTRO (Always Open) */}
          {page === 2 && (
            <div className="content">
              <h1>Our First Valentine's ‚ù§Ô∏è</h1>
              <div className="story-text">
                This is our first Valentine's together, and my first one ever.
                So I have prepared a something special for us.
                <br/><br/>
                Every day until the 14th, a new page will unlock. Each page has a little story and a surprise for you.
              </div>
            </div>
          )}

          

          {/* PAGE 3: PROMISE DAY */}
{page === 3 && (
  <div className="content">
    <h1>Terms of Endearment üìú</h1>
    <div className="story-text" style={{ fontSize: '1rem' }}>
      <div style={{ 
        height: '200px', 
        overflowY: 'scroll', 
        background: '#fff', 
        border: '2px solid #eee', 
        borderRadius: '10px', 
        padding: '15px',
        textAlign: 'left',
        marginBottom: '20px'
      }}>
        <p><strong>AGREEMENT OF LOVE</strong></p>
        <p>By proceeding, I promise to:</p>
        <p>1. Always be at your side no matter what.</p>
        <p>2. Prioritise you over everything else(ghum ta ektu chere dile bhalo hoi üòÖ).</p>
        <p>3. Give you frequent treats.</p>
        <p>4. Always take decisions on your behalf.</p>
        <p>5. Love you unconditionally, forever and ever.(Thats Implied üòò)</p>
        <br />
        <p><em>(Scroll to read full terms...)</em></p>
      </div>
      <label style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px', cursor: 'pointer' }}>
        <input type="checkbox" style={{ transform: 'scale(1.5)', accentColor: '#ff4757' }} /> 
        I accept these terms ‚ù§Ô∏è
      </label>
                      <img src="Photo3.png" style={{ width: '100%', borderRadius: '10px', marginTop: '10px' }} />

    </div>
  </div>
)}

 {/* PAGE 4: HUG DAY (Foggy Window Reveal) */}
{page === 4 && (
  <div className="content" style={{ position: 'relative', overflow: 'hidden' }}>
    <h1>Wipe Away The Distance üå´Ô∏è</h1>
    <p style={{ marginBottom: '10px' }}>
      The distance feels like a fog between us.<br/>
      <strong>Rub the screen</strong> to clear it and find me.
    </p>

    <div style={{ position: 'relative', width: '300px', height: '300px', margin: '0 auto' }}>
      
      {/* 1. THE HIDDEN CONTENT (Underneath) */}
      <div style={{
        position: 'absolute',
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        background: '#ffecd2',
        borderRadius: '15px',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        zIndex: 1
      }}>
        {/* PUT YOUR PHOTO HERE INSTEAD OF THIS EMOJI */}
        <img src="Photo4.JPG" style={{ width: '100%', height: '100%', objectFit: 'cover', borderRadius: '15px' }} />
        <h3 style={{ color: '#ff4757', marginTop: '10px' }}>I'm right here.</h3>
      </div>

      {/* 2. THE FOG (Canvas Overlay) */}
      <canvas
        width={300}
        height={300}
        style={{
          position: 'absolute',
          top: 0,
          left: 0,
          zIndex: 2,
          borderRadius: '15px',
          cursor: 'pointer',
          touchAction: 'none' // Prevents scrolling while rubbing
        }}
        ref={(canvas) => {
          if (!canvas) return;
          const ctx = canvas.getContext('2d');
          
          // Only draw the grey fog ONCE when mounted
          if (!canvas.getAttribute('data-drawn')) {
            ctx.fillStyle = '#b2bec3'; // Grey fog color
            ctx.fillRect(0, 0, 300, 300);
            
            // Add some text instruction on the fog
            ctx.fillStyle = '#636e72';
            ctx.font = '20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText("Rub me!", 150, 150);
            
            canvas.setAttribute('data-drawn', 'true');
          }

          // The erasing function
          const scratch = (x, y) => {
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath();
            ctx.arc(x, y, 25, 0, Math.PI * 2); // Brush size
            ctx.fill();
          };

          // Mouse Events
          canvas.onmousemove = (e) => {
            const rect = canvas.getBoundingClientRect();
            if (e.buttons > 0) scratch(e.clientX - rect.left, e.clientY - rect.top);
          };

          // Touch Events (Mobile)
          canvas.ontouchmove = (e) => {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            scratch(touch.clientX - rect.left, touch.clientY - rect.top);
          };
        }}
      />
    </div>
    <p style={{ fontSize: '0.8rem', marginTop: '15px', color: '#888' }}>
      (Keep rubbing until you see me clearly)
    </p>
  </div>
)}

           {/* PAGE 5: KISS DAY (Trajectory Simulator) */}
{page === 5 && (
  <div className="content">
    <h1>Kiss Trajectory üíã</h1>
    
    {/* Simulation Container */}
    <div style={{
      background: '#1a1a1a',
      color: '#0f0',
      fontFamily: 'monospace',
      padding: '20px',
      borderRadius: '10px',
      textAlign: 'left',
      height: '300px',
      overflow: 'hidden',
      position: 'relative',
      boxShadow: '0 10px 30px rgba(0,0,0,0.5)',
      marginTop: '20px'
    }}>
      {/* The Radar Scanner Animation */}
      <div style={{
        position: 'absolute',
        top: '50%',
        left: '50%',
        transform: 'translate(-50%, -50%)',
        width: '200px',
        height: '200px',
        border: '2px solid #0f0',
        borderRadius: '50%',
        opacity: 0.3
      }}></div>
      <div style={{
        position: 'absolute',
        top: '50%',
        left: '50%',
        width: '100px',
        height: '2px',
        background: '#0f0',
        transformOrigin: '0% 0%',
        animation: 'spin 2s linear infinite' // Note: You'd need to add keyframes for spin in CSS or use inline style for rotation if possible, but this visual is enough
      }}></div>

      {/* Dynamic Text Output */}
<p>&gt; Initiating Kiss Sequence...</p>
<p>&gt; Calculating Distance... <span style={{color: '#ff4757'}}>LDR_MODE_ACTIVE</span></p>
<p>&gt; Wind Speed: 12km/h SE</p>
<p>&gt; Heartbeat: <span style={{animation: 'pulse 0.5s infinite'}}>120 BPM</span></p>
<p>&gt; Target Locked: <span style={{color: 'yellow'}}>MY VALENTINE</span></p>
<br/>
<p style={{textAlign: 'center', color: 'white'}}>
  INCOMING...
</p>
      
      {/* The Flying Kiss Emoji */}
      <div style={{
        position: 'absolute',
        left: '0',
        bottom: '20px',
        fontSize: '3rem',
        animation: 'flyAcross 3s ease-in-out infinite'
      }}>
        üíã
      </div>
      
      {/* Add this style block locally for the animations */}
      <style>{`
        @keyframes flyAcross {
          0% { left: -50px; bottom: 20px; transform: rotate(0deg); }
          50% { left: 50%; bottom: 100px; transform: rotate(180deg); }
          100% { left: 110%; bottom: 20px; transform: rotate(360deg); }
        }
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.5; }
          100% { opacity: 1; }
        }
      `}</style>
    </div>

    <p style={{marginTop: '15px', fontSize: '0.9rem'}}>
      *Estimated arrival time: Immediate*
    </p>
  </div>
)}

          {/* PAGE 6: VALENTINE'S PHOTOS (Feb 14) - OLD PAGE 3 */}
          {page === 6 && (
            <div className="content">
              <h1>Us ‚ù§Ô∏è</h1>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '20px', alignItems: 'center', width: '100%', marginTop: '20px' }}>
                <div style={{ width: '100%', padding: '10px', background: '#fff0f3', borderRadius: '15px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>
                  <img src="Photo1.png" alt="Us 1" style={{ width: '100%', borderRadius: '10px' }} />
                </div>
                <div style={{ width: '100%', padding: '10px', background: '#fff0f3', borderRadius: '15px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>
                  <img src="Photo2.png" alt="Us 2" style={{ width: '100%', borderRadius: '10px' }} />
                </div>
              </div>
            </div>
          )}

          {/* PAGE 7: FINAL MESSAGE (Feb 14) - OLD PAGE 4 */}
          {page === 7 && (
            <div className="content">
              <h1 style={{ fontSize: 'clamp(1.2rem, 6vw, 3rem)', lineHeight: '1.2', letterSpacing: '2px', wordBreak: 'normal' }}>HAPPY VALENTINE'S DAY! ‚ù§Ô∏è</h1>
              <p>To many more adventures together.</p>
            </div>
          )}
        </div>

        {/* LOCKED NEXT BUTTON */}
        {page >= 2 && page < 8 && (
          <button
            className={`btn btn-next-fixed ${isTransitioning ? 'fade-out' : ''}`}
            onClick={() => triggerPageChange(page + 1)}
            disabled={!isNextUnlocked}
            style={{
              background: isNextUnlocked ? '#ff4757' : '#bdc3c7',
              cursor: isNextUnlocked ? 'pointer' : 'not-allowed',
              opacity: isNextUnlocked ? 1 : 0.8
            }}
          >
            {isNextUnlocked ? 'Next ‚Üí' : `üîí ${timeMessage}`}
          </button>
        )}

        {/* Audio */}
        {
          page >= 2 && (
            <audio autoPlay loop>
              <source src="TomarGaan.mp3" type="audio/mpeg" />
            </audio>
          )
        }
      </div >
    );
  }

  ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>

</html>
