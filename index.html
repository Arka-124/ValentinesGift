<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Will you be my Valentine?</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Quicksand', sans-serif;
      overflow-y: auto;
      min-height: 100vh;
    }

    .container {
      min-height: 100vh;
      display: flex;
      padding: 20px;
      position: relative;
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ff9a9e 100%);
    }

    /* Animation Classes */
    .fade-layer {
      transition: opacity 0.6s ease-in-out;
      opacity: 1;
      width: 100%;
      display: flex;
      margin: auto;
      justify-content: center;
      min-height: min-content;
    }

    .fade-out {
      opacity: 0;
    }

    .content {
      text-align: center;
      max-width: 650px;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      padding: 50px 40px;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      z-index: 10;
    }

    .button-container {
      display: flex;
      gap: 30px;
      justify-content: center;
      margin-top: 40px;
      position: relative;
    }

    .btn {
      width: 160px;
      height: 60px;
      font-size: 1.2rem;
      font-weight: 700;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-family: 'Quicksand', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .btn-yes {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    .btn-no {
      background: white;
      color: #ff4757;
      position: relative;
      border: 2px solid #fed6e3;
    }

    .btn-no.absolute {
      position: fixed;
      z-index: 1000;
    }

    .btn-next-fixed {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 2000;
      background: #ff4757;
      color: white;
      width: 140px;
      height: 55px;
      transition: opacity 0.6s ease-in-out, transform 0.3s ease;
    }

    .btn-next-fixed:hover {
      transform: scale(1.05);
    }

    h1 {
      font-family: 'Pacifico', cursive;
      color: #ff6b9d;
      margin-bottom: 20px;
    }

    .story-text {
      line-height: 1.8;
      color: #555;
      font-size: 1.1rem;
    }

    .yippee-screen {
      position: fixed;
      inset: 0;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .flash-text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 25px;
      border-radius: 20px;
      color: #ff4757;
      font-weight: bold;
      z-index: 5000;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function App() {
      const [page, setPage] = useState(1);
      const [isTransitioning, setIsTransitioning] = useState(false);
      const [isNoAbsolute, setIsNoAbsolute] = useState(false);
      const [noPosition, setNoPosition] = useState({ top: 'auto', left: 'auto' });
      const [showFlash, setShowFlash] = useState(false);
      const [showYippee, setShowYippee] = useState(false);

      const triggerPageChange = (nextPage) => {
        setIsTransitioning(true);
        setTimeout(() => {
          setPage(nextPage);
          setIsTransitioning(false);
        }, 600); // Matches CSS transition time
      };

      const moveNoButton = () => {
        if (!isNoAbsolute) setIsNoAbsolute(true);
        const maxX = window.innerWidth - 160;
        const maxY = window.innerHeight - 60;
        setNoPosition({
          left: `${Math.random() * maxX}px`,
          top: `${Math.random() * maxY}px`
        });
        setShowFlash(true);
        setTimeout(() => setShowFlash(false), 700);
      };

      const handleYes = () => {
        setShowYippee(true);
        setTimeout(() => {
          setShowYippee(false);
          triggerPageChange(2);
        }, 2500);
      };

      return (
        <div className="container">
          {showFlash && <div className="flash-text">Wrong choice! Try again üòú</div>}

          {showYippee && (
            <div className="yippee-screen">
              <h1 style={{ fontSize: '4rem' }}>Yippeeee! üéâ</h1>
              <img src="ted-blow-a-kiss.gif" alt="Yippee" style={{ maxWidth: '300px', margin: '20px', borderRadius: '15px' }} />
              <audio autoPlay>
                <source src="yippee-tbh.mp3" type="audio/mpeg" />
              </audio>
            </div>
          )}

          {/* Fade Layer handles the animation for the main content */}
          <div className={`fade-layer ${isTransitioning ? 'fade-out' : ''}`}>

            {/* PAGE 1 */}
            {page === 1 && (
              <div className="content">
                <h1>Arka sent you a request</h1>
                <p style={{ fontSize: '1.4rem', color: '#ff4757' }}>Will you be my Valentine?</p>
                <div className="button-container">
                  <button className="btn btn-yes" onClick={handleYes}>Yes ‚ù§Ô∏è</button>
                  <button
                    className={`btn btn-no ${isNoAbsolute ? 'absolute' : ''}`}
                    onMouseEnter={isNoAbsolute ? moveNoButton : null}
                    onClick={moveNoButton}
                    style={{ top: noPosition.top, left: noPosition.left }}
                  >No</button>
                </div>
              </div>
            )}

            {/* PAGE 2 */}
            {page === 2 && (
              <div className="content">
                <h1>Our Story ‚ù§Ô∏è</h1>
                <div className="story-text">
                  This is our first Valentine's together, and my first one ever.
                  So I have prepared a something special for us.
                  Hope you like it !
                </div>
              </div>
            )}

            {/* PAGE 3 */}
            {page === 3 && (
              <div className="content">
                <h1>A Little Note...</h1>
                <div style={{ display: 'flex', flexDirection: 'column', gap: '20px', alignItems: 'center', width: '100%', marginTop: '20px' }}>
                  <div style={{ width: '100%', padding: '10px', background: '#fff0f3', borderRadius: '15px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>
                    <img src="Photo1.png" alt="Us 1" style={{ width: '100%', borderRadius: '10px' }} />
                  </div>
                  <div style={{ width: '100%', padding: '10px', background: '#fff0f3', borderRadius: '15px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>
                    <img src="Photo2.png" alt="Us 2" style={{ width: '100%', borderRadius: '10px' }} />
                  </div>
                </div>
              </div>
            )}

            {/* PAGE 4 */}
            {page === 4 && (
              <div className="content">
                <h1 style={{ fontSize: 'clamp(1.2rem, 6vw, 3rem)', lineHeight: '1.2', letterSpacing: '2px', wordBreak: 'normal' }}>HAPPY VALENTINE'S DAY! ‚ù§Ô∏è</h1>
                <p>To many more adventures together.</p>
              </div>
            )}
          </div>

          {/* FIXED NEXT BUTTON (Bottom Right) */}
          {page >= 2 && page < 4 && (
            <button
              className={`btn btn-next-fixed ${isTransitioning ? 'fade-out' : ''}`}
              onClick={() => triggerPageChange(page + 1)}
            >
              Next ‚Üí
            </button>
          )}

          {/* Persistent Audio for Pages 2, 3, 4 */}
          {
            page >= 2 && (
              <audio autoPlay loop>
                <source src="TomarGaan.mp3" type="audio/mpeg" />
              </audio>
            )
          }
        </div >
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>

</html>
